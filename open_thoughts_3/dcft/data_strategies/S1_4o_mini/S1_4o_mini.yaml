operators:
  - id: load_hf_source
    config:
      type: hf_source
      dataset: mlfoundations-dev/s1K_reformat
      split: train
  - id: annotate_instruction
    config:
      type: completions
      map: chat
      require_all_responses: false
      map_config:
        user_message_column: question
        output_column: 4o_completion
      model: gpt-4o-mini
      top_p: 0.95
      batch: false
    input_ids:
      - load_hf_source
  - id: convert_to_sharegpt
    config:
      type: function
      function: data_strategies.commons.convert_instruction_response_to_sharegpt
      function_config:
        input_instruction_column:  question
        input_response_column: 4o_completion
        output_sharegpt_column: conversations
    input_ids:
      - annotate_instruction