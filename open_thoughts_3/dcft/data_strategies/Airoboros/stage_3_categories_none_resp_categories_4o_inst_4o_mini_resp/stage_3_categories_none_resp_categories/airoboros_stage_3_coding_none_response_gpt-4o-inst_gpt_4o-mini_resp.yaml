operators:
- id: load_stage_2
  config:
    type: load_preexisting
    framework_name: airoboros_stage_2_none_resp_gpt-4o
- id: select_coding_instructions
  config:
    type: function
    function: data_strategies.commons.select_rows
    function_config:
      conditions:
        airoboros_subset: coding
  input_ids:
  - load_stage_2
- id: complete_none_responses
  config:
    type: completions
    model: gpt-4o-mini
    map: chat
    map_config:
      user_message_column: instruction
      output_column: response
    temperature: 0.7
    top_p: 0.5
    presence_penalty: 2.0
  input_ids:
  - select_coding_instructions
- id: select_columns
  config:
    type: function
    function: data_strategies.commons.select_columns
    function_config:
      columns:
      - instruction
      - response
      - airoboros_subset
  input_ids:
  - complete_none_responses
- id: sample_dataset
  config:
    type: function
    function: data_strategies.commons.uniform_sample
    function_config:
      num_samples: 1200
  input_ids:
  - select_columns
